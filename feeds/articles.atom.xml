<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Monty's Blog - articles</title><link href="beardedplatypus.github.io/" rel="alternate"></link><link href="beardedplatypus.github.io/feeds/articles.atom.xml" rel="self"></link><id>beardedplatypus.github.io/</id><updated>2019-08-03T00:00:00+02:00</updated><entry><title>TeamCity: Adding a custom report to your build configuration</title><link href="beardedplatypus.github.io/teamcity-adding-a-custom-report-to-your-build-configuration.html" rel="alternate"></link><published>2019-08-03T00:00:00+02:00</published><updated>2019-08-03T00:00:00+02:00</updated><author><name>Maarten Tegelaers</name></author><id>tag:None,2019-08-03:beardedplatypus.github.io/teamcity-adding-a-custom-report-to-your-build-configuration.html</id><summary type="html">&lt;p&gt;Recently, I took some time to add a bit of custom reporting to the teamcity 
project we use at work. I did not have much experience with this before, and
honestly, I was quite surprised with the ease to do so. As a reference for 
myself, and hopefully for you â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently, I took some time to add a bit of custom reporting to the teamcity 
project we use at work. I did not have much experience with this before, and
honestly, I was quite surprised with the ease to do so. As a reference for 
myself, and hopefully for you as well, in this short article I will detail how I
achieved this.&lt;/p&gt;
&lt;h1&gt;Motivation&lt;/h1&gt;
&lt;p&gt;To give a little bit of background, at the time of writing, I work at Deltares,
a knowledge institute on Water. I work on one of the GUIs for our water 
modelling software. We use TeamCity on our build server. The TeamCity project 
contains a bunch of configurations doing different tests and builds our 
installers.&lt;/p&gt;
&lt;p&gt;One of these configurations is our Acceptance Tests configuration. This
configuration runs a bunch of models, made within deltares, that our considered
representative of models that can be made. As such, if the software runs 
correctly for these models, it should run correctly for all models.
The test configuration is set up to run a set of NUnit tests that load these
models, does a few checks and runs the models. Arguably this is not an ideal
set up, but it is the process we have at the moment. &lt;/p&gt;
&lt;p&gt;Each model run produces a log file, that describes what has happened, as well as
any warnings and errors. This file is of interest when these acceptance models
start failing. However, the current set up removes all of these files. We want
to be able to inspect these files, to check them for any warnings or errors that
might point to mistakes in our code (or the kernel code).&lt;/p&gt;
&lt;p&gt;A first step to achieve that, would be to save these files in a separate 
artifact. Which allows us to download them, and inspect them. But why stop 
there? We could easily extend this, to allow us to inspect the files from within
TeamCity, which lowers the barrier to do so, quite a bit. We can do so with 
custom reports, hence this article.&lt;/p&gt;
&lt;h1&gt;Bring out the custom reports!&lt;/h1&gt;
&lt;h2&gt;What do we need?&lt;/h2&gt;
&lt;p&gt;A custom report is basically an additional tab, in which we can display 
additional information, which is produced as part of our build procedure. This
can be anything, really. It can be used to track performance times, it can be 
used to build a custom coverage tool. All we need to add this custom report to
our TeamCity configuration, is an html file. This html file will be hosted in
the TeamCity report tab, [see][https://confluence.jetbrains.com/display/TCD10/Including+Third-Party+Reports+in+the+Build+Results].
You can even put your html file in an archive like zip, and just refer to it.
Something we will do. &lt;/p&gt;
&lt;p&gt;In order to make this report available to our tab, we do need to add it to our
artifacts. As such, the only thing you need is an html file that is published 
as an artifact.&lt;/p&gt;
&lt;h2&gt;Optionally adding an additional build step&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Feel free to skip this part if you do not need to add a new build step that executes a python tool&lt;/em&gt;
As mentioned before, the html file should be produced as part of the build
process. If none is produced at the moment, it might be necessary to add another
build step to your configuration, which is responsible for building the actual 
report.&lt;/p&gt;
&lt;p&gt;In my case, the tests produce a bunch of log files, one per model run. These
are saved within the check-out folder, such that they will not be immediately
deleted. However, no report html is generated automatically. To do this, I have
written a small python script, that collects the content of the log files and 
stuffs them inside a simple html file. This html file is the one we want to 
publish. Lastly, the script zips the whole set of log files and the index
file into a single zip, for easy download.&lt;/p&gt;
&lt;p&gt;In order to execute this script, a build step is added to the configuration: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;First navigate to the build configuration, in which we want to produce the
   report. Press the &lt;em&gt;Edit Configuration Settings&lt;/em&gt; link in the top right corner
   next to the &lt;em&gt;run&lt;/em&gt; and &lt;em&gt;actions&lt;/em&gt; button. From here, select the &lt;em&gt;Build Steps&lt;/em&gt;
   link on the left hand side of the screen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We are presented with several buttons that allow us to modify our build
   configuration. We want to press &lt;em&gt;Add build step&lt;/em&gt; to create our new build
   step at the end of our configuration. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You are presented with a wizard to set up your build step. In our case, we
   want to execute a python script, which we will do from the Command Line, 
   thus we select &lt;em&gt;Command Line&lt;/em&gt; as our runner type, did not see that coming
   did you? &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Choose an appropriate &lt;em&gt;Step name&lt;/em&gt;, this will show up in the build steps
   page we were on earlier. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In our case we want to execute the python script regardless of whether the
   test runs were successfull, so instead of &lt;em&gt;If all previous steps finished successfully&lt;/em&gt;
   we can select, &lt;em&gt;Even if some of the previous steps failed&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We can leave the &lt;em&gt;Working Directory&lt;/em&gt; empty if you are running from the
   check-out folder, otherwise you want to set the folder in which you want
   to execute your command line script. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We can also leave the &lt;em&gt;Custom script&lt;/em&gt; bit, and move on to filling in the
   build script content.&lt;br&gt;
   On our build server we have installed &lt;code&gt;conda&lt;/code&gt;, which we will use to quickly
   generate a python3 environemnt, which we will use to execute the script.
   Then we will run the script, and finally we will remove the environment 
   again, because it is always good to clean up after yourself.&lt;br&gt;
   This leads to the following script:&lt;br&gt;
&lt;code&gt;CALL conda create -y -n &amp;lt;someEnvName&amp;gt; python=3.5
   CALL activate &amp;lt;someEnvName&amp;gt;
   CALL python "path/to/your/script.py" [withOptionalArguments]
   CALL deactivate
   CALL conda remove -y -n &amp;lt;someEnvName&amp;gt; --all&lt;/code&gt;&lt;br&gt;
   Of course, you want to replace &lt;code&gt;&amp;lt;someEnvName&amp;gt;&lt;/code&gt; with your actual environment
   name, and the python call with the one that actually executes your script.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We now got our reporting tool set up, which will produce our output somewhere
in our check-out folder (hopefully).&lt;/p&gt;
&lt;h2&gt;Adding the report to the artifacts&lt;/h2&gt;
&lt;p&gt;Assuming we have our reports being generated somewhere within the check-out 
folder. We will have to add them to our artifacts. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;First navigate to the build configuration to which we want to add our report
   tab. Then press &lt;em&gt;Edit Configuration Settings&lt;/em&gt; next to the &lt;em&gt;Run&lt;/em&gt; and &lt;em&gt;Actions&lt;/em&gt;
   buttons.&lt;/li&gt;
&lt;li&gt;On the page that opens there should be an &lt;em&gt;Artifact paths&lt;/em&gt; section. We can 
   add the path to our report here, such that it gets released as an artifact.
   The given path should be relative to the check-out folder.&lt;br&gt;
   In our case, the report is made in an &lt;em&gt;Artifacts&lt;/em&gt; folder, and is called
   &lt;em&gt;dia_report.zip&lt;/em&gt; (naming has never been one of my strong suits). Thus our
   artifact becomes.&lt;br&gt;
&lt;code&gt;Artifacts\dia_report.zip&lt;/code&gt;&lt;br&gt;
   If you already have a run that produced the report, you can also press the
   little tree button next to the text field, to select it, producing the 
   correct path.&lt;br&gt;
   With that done, you should see your report in the next run as an artifact.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Adding a custom build report&lt;/h2&gt;
&lt;p&gt;The last step is adding the actual custom report tab to the build configuration.
This is not done within the build configuration, something I found a bit counter
intuitive, but instead should be done at the project root. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Navigate to the &lt;code&gt;&amp;lt;root project&amp;gt;&lt;/code&gt; and select &lt;em&gt;Edit Project Settings&lt;/em&gt; in the 
   top right corner.&lt;/li&gt;
&lt;li&gt;Navigate to the &lt;em&gt;Report Tabs&lt;/em&gt; page through the menu on your left hand side.&lt;/li&gt;
&lt;li&gt;There are two options, you can create a new project report tab, or a build
   report tab. Project report tabs will show on the project, and use the 
   artifacts produced by one of the build configurations within the project.
   The build tab is what we want. It allows us to set a path to a report html.
   Any build configuration that contains an html file within its artifacts at 
   this specific path, will have this build tab.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As such, press the &lt;em&gt;Create new build report tab&lt;/em&gt;
4. Now set the &lt;em&gt;Tab Title&lt;/em&gt; and the &lt;em&gt;Start page&lt;/em&gt; of your report html. 
   Press save, and voila! We should have ourselves a custom report tab.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Within this article we added a simple custom report tab to one of our TeamCity
build configurations. We can use this to provide easily provide additional 
test information directly within our build server. The process itself is 
rather painless, and for the most part intuitive. All things considered, 
I am really happy how this turned out, and I hope it helps you in your 
process as well.&lt;/p&gt;
&lt;p&gt;Hopefully see you next time!&lt;/p&gt;</content></entry><entry><title>Setting up Continuous Delivery for your static website.</title><link href="beardedplatypus.github.io/setting-up-continuous-delivery-for-your-static-website.html" rel="alternate"></link><published>2019-07-21T00:00:00+02:00</published><updated>2019-07-21T00:00:00+02:00</updated><author><name>Maarten Tegelaers</name></author><id>tag:None,2019-07-21:beardedplatypus.github.io/setting-up-continuous-delivery-for-your-static-website.html</id><summary type="html">&lt;p&gt;In this article we will take a short look how to set up continuous delivery for
a simple static website (my own, woo!) with Azure DevOps. Once set up, any 
commit to both content and the theme should trigger the right builds that end up
building and pushing the changes â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this article we will take a short look how to set up continuous delivery for
a simple static website (my own, woo!) with Azure DevOps. Once set up, any 
commit to both content and the theme should trigger the right builds that end up
building and pushing the changes to a github pages website. For my own website
I use pelican, however, the content in this article should be easily adjustable
to any static website!&lt;/p&gt;
&lt;h1&gt;Motivation&lt;/h1&gt;
&lt;p&gt;Lately, I have been wanting to start writing and posting some blog articles 
again. Having an active blog has been something I want for quite a while (I 
think my original github pages was created afew years ago), however I never took
the time to properly finish any of the articles, as polishing my own personal 
projects has never been a strong suit of mine. &lt;/p&gt;
&lt;p&gt;These past few weeks I have been working on some small personal projects that I
want to document in some fashion, such that I can understand what I did in the
future. I figured this would be an excellent opportunity to create some blog 
articles that are worth sharing. &lt;/p&gt;
&lt;p&gt;When I looked at this dusty bit of webspace, I noticed however, that it had not
aged as well as I had hoped. So as would be expected from my procrastinating 
nature, I decided to first dust it off, give it a lick of paint, before doing 
the thing I actually want to do, which is write the blog articles.&lt;/p&gt;
&lt;p&gt;As part of the dusting off, I figured I would automate some steps that felt 
like a drag. Because the website is a generated static website, whenever I made 
a change to either the the theme or the content, I would need to run all the 
compilation steps by hand, and then push the results to my github pages 
repository. Lazy as I am, this cannot be of course. &lt;/p&gt;
&lt;p&gt;As I have been working with Azure DevOps lately in some other personal projects, 
I figured it would be a good choice to automate the compilation with. These 
build steps can then be executed as part of a build pipeline running on the 
servers of microsoft. And because of that idea, you can now read this article!&lt;/p&gt;
&lt;h1&gt;Project Configuration&lt;/h1&gt;
&lt;p&gt;The main configuration of my website can be found in 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config"&gt;this repository&lt;/a&gt;
As mentioned before, the website is created with pelican, a static website 
generator written in python. There are a bunch of alternatives on the market 
(Jekyll comes to mind but also newer generators like Hugo), however I picked 
pelican because of its python support, a language I am already quite comfortable
with. As much as I enjoy learning new languages, in this case I wanted something
I could get up and running without struggling too much (of course being me, I 
did struggle with it, but that's besides the point). &lt;/p&gt;
&lt;p&gt;Besides pelican I have used Gulp to compile my own crafted theme, and do a little
bit of optimisation. The examples within this blog post will thus be focused on
these technologies. However, it should be rather trivial to adapt the examples 
to any other static website generator. In this section I will quickly go over 
the project structure,and how the technologies are set up. For further detail 
I would refer you to the documentation of the specific tools, as the focus of
the rest of the article is on how to set up the Azure DevOps pipelines.&lt;/p&gt;
&lt;h2&gt;Folder Structure&lt;/h2&gt;
&lt;p&gt;The static website basically consists of three parts, the theme, which can be
found in &lt;a href="https://github.com/BeardedPlatypus/rubber-squid"&gt;this repository&lt;/a&gt;, 
the content, which can be found in 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-content"&gt;this repository&lt;/a&gt;
and lastly the configuration files, which can be found in 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config"&gt;this repository&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;After completing a full run of the compilation of the website we will have 
the following (simplified) directory structure:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Base&lt;/span&gt;                  &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;repository&lt;/span&gt;
&lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;           &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;repository&lt;/span&gt;
&lt;span class="err"&gt;â”‚&lt;/span&gt;   &lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;articles&lt;/span&gt;
&lt;span class="err"&gt;â”‚&lt;/span&gt;   &lt;span class="err"&gt;â””â”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;pages&lt;/span&gt;
&lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;           &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;plugins&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;pelican&lt;/span&gt;
&lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;production&lt;/span&gt;        &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;output&lt;/span&gt; &lt;span class="n"&gt;folder&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;pelican&lt;/span&gt;
&lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;
&lt;span class="err"&gt;â”‚&lt;/span&gt;   &lt;span class="err"&gt;â””â”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;rubber&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;squid&lt;/span&gt;
&lt;span class="err"&gt;â”‚&lt;/span&gt;       &lt;span class="err"&gt;â”œâ”€â”€â”€&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;
&lt;span class="err"&gt;â”‚&lt;/span&gt;       &lt;span class="err"&gt;â””â”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;templates&lt;/span&gt;
&lt;span class="err"&gt;â””â”€â”€â”€&lt;/span&gt;&lt;span class="n"&gt;website_dist&lt;/span&gt;      &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;output&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;postPelican&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, the content folder is checked out as separate repository in the
config folder, and the theme is checked out in the theme folder. I could have 
set this up with the help of git submodules, however I have not done this yet,
and for the current purposes, this set up suffices.&lt;/p&gt;
&lt;h2&gt;Pelican&lt;/h2&gt;
&lt;p&gt;Pelican is configured through the 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/pelicanconf.py"&gt;pelican.conf&lt;/a&gt;
and the 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/publishconf.py"&gt;publish.conf&lt;/a&gt;.
Within these files things like the theme, names etc are specified. In addition
to the default pelican, I also use the summary plugin, which helps creating the
summaries for the blog index page. I have modified this slightly to remove any
links from within the summaries.&lt;/p&gt;
&lt;p&gt;When pelican is properly installed, the static website can be generated through
the following command: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;publishconf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will create all the html pages based on your content, theme and 
configuration in the &lt;code&gt;production&lt;/code&gt; folder. The contents of this folder
could be uploaded immediately to a github pages repository, and it 
would be available for viewing. However we can do a little bit better and 
optimise the result of pelican with some javascript magic.&lt;/p&gt;
&lt;h2&gt;Gulp&lt;/h2&gt;
&lt;p&gt;When I created the previous incarnation of this website, I did not know anything
about web optimisation, since then I have learned some new tricks and figured 
I wanted to incorporate them. Building my website now has a pre and post step
besides the pelican compile step.&lt;/p&gt;
&lt;p&gt;Before we can build the website, we first need to compile the theme, or more 
specifically, the sass files, such that we have some css that pelican can use.
As mentioned before, once the compilation is done, we can then further optimise
the output a bit by calling some other javascript magic.&lt;/p&gt;
&lt;p&gt;Both of these steps are managed by &lt;a href="https://gulpjs.com/"&gt;Gulp&lt;/a&gt;.
I set up a simple  workflow, based upon 
&lt;a href="https://css-tricks.com/gulp-for-beginners/"&gt;this tutorial&lt;/a&gt; to do so.&lt;/p&gt;
&lt;p&gt;The pre step at the moment of writing merely compiles the sass files through the
following gulp command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;prePelican&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The post pelican step collects all css files, concatenates them, and minimises them,
and puts them in a &lt;code&gt;website_dist&lt;/code&gt; folder. It also copies over any of the html, 
js, and feed files. I currently have not set up the minimisation of the js file, 
as I already did this in a separate step, when I created my own js. However in the
future there is a good chance I will add this. This step can be executed as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;postPelican&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The steps themself are set up in the &lt;code&gt;gulp.js&lt;/code&gt; file of the 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/gulpfile.js"&gt;config repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Keep in mind that I am nowhere near experienced with any of this, so take this 
set up with a grain of salt, and do your own research in order to find a set up 
that works well for you!&lt;/p&gt;
&lt;h1&gt;Compile the website on Azure DevOps&lt;/h1&gt;
&lt;p&gt;With the extremely short primer out of the way, let's take a look at the actual
build configuration. In essence, we want to do 4 steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;compile the theme&lt;/li&gt;
&lt;li&gt;compile pelican&lt;/li&gt;
&lt;li&gt;optimise the pelican output&lt;/li&gt;
&lt;li&gt;push it all to the github pages&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;in the following section we will take a look at each of these steps, if however
you just want to see the configuration, it can be found 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/azure-pipelines.yml"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For the sake of brevity, I am going to assume you already have a project set up, 
and can know where to find the add build pipeline button. If you do not know this,
I recommend going over the documentation of Azure DevOps, it should not take long to
set up.&lt;/p&gt;
&lt;h2&gt;Setting up the Pelican Components&lt;/h2&gt;
&lt;p&gt;In order to set up our pipeline, we need to make use of python and javascript. We will
start with python, and then move on to the nodejs component.&lt;/p&gt;
&lt;p&gt;The main build line should be based in our config repository, as this one will hold all
the information to actually build the website. As such, I selected GitHub as my source 
of my code, and then the config repository. Since we want to use python for our pelican
application build, I started out with the python package configuration as base. &lt;/p&gt;
&lt;p&gt;We only need a single python version, as we only build our website once. Furthermore,
at the time of writing I did not include any python testing, so I removed this step to.
This leaves us with the following yml code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;# Python package&lt;/span&gt;
&lt;span class="cp"&gt;# Create and test a Python package on multiple Python versions.&lt;/span&gt;
&lt;span class="cp"&gt;# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:&lt;/span&gt;
&lt;span class="cp"&gt;# https:&lt;/span&gt;&lt;span class="c1"&gt;//docs.microsoft.com/azure/devops/pipelines/languages/python&lt;/span&gt;

&lt;span class="nl"&gt;trigger&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;

&lt;span class="nl"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;vmImage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="nl"&gt;strategy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;Python37&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nl"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="mf"&gt;3.7&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="nl"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;task&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;UsePythonVersion&lt;/span&gt;&lt;span class="mi"&gt;@0&lt;/span&gt;
  &lt;span class="nl"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;versionSpec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Use&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt;
    &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="n"&gt;requirements&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Install&lt;/span&gt; &lt;span class="n"&gt;dependencies&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;First it defines a trigger, this means that whenever a commit is made on the 
branches listed under it, this specific build will trigger. Since we only want
to actually build and push or website when we make a definitive commit, we can
leave this on master.&lt;/p&gt;
&lt;p&gt;Next some strategies are defined. If we had an actual python package to test, 
we might want to do that for different versions. However, we only need one 
version of python, so we can remove all but the 3.7 version, as this is the 
latest.&lt;/p&gt;
&lt;p&gt;In the following step it gets the specific python version, and then 
installs our requirements.txt file. The requirements file specifies which packages
need to be installed. For pelican we need both the pelican package and the markdown
package, as such it looks liks this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once these steps have executed, we have our python installation ready to use, and
we can add the pelican compile step.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;pelican&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;publishconf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pelican Compile&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, it merely executes our pelican command, as we defined it the previous
section. The &lt;code&gt;displayName&lt;/code&gt; will be shown in the summary of Azure DevOps, and makes
debugging a bit easier, so I try to give it a relevant name, but you could always
change or even remove it.&lt;/p&gt;
&lt;p&gt;We can add this part right after the python bit and execute it. Unfortunately. This
code does not work yet, as we do not have our data to act on. Before we set this up
though, let's add the javascript bit to our code.&lt;/p&gt;
&lt;h2&gt;Setting up the nodejs / npm components&lt;/h2&gt;
&lt;p&gt;If we instead had started with Node.js pipeline, our template would have looked like 
this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;# Node.js&lt;/span&gt;
&lt;span class="cp"&gt;# Build a general Node.js project with npm.&lt;/span&gt;
&lt;span class="cp"&gt;# Add steps that analyze code, save build artifacts, deploy, and more:&lt;/span&gt;
&lt;span class="cp"&gt;# https:&lt;/span&gt;&lt;span class="c1"&gt;//docs.microsoft.com/azure/devops/pipelines/languages/javascript&lt;/span&gt;

&lt;span class="nl"&gt;trigger&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;

&lt;span class="nl"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;vmImage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="nl"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;task&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NodeTool&lt;/span&gt;&lt;span class="mi"&gt;@0&lt;/span&gt;
  &lt;span class="nl"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;versionSpec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="mf"&gt;10.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Install&lt;/span&gt; &lt;span class="n"&gt;Node&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;js&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
    &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It uses the same pool and trigger as our python script, and contains the steps to
install Node.js and npm. Therefore we can just copy these install steps to the 
configuration we are setting up.&lt;/p&gt;
&lt;p&gt;We can remove the npm run build step, as we are not building an actual Node.js 
application, we merely want it to install gulp. Once we call the npm
install step, all the packages from our &lt;code&gt;package.json&lt;/code&gt; are installed. For this
website this is basically gulp, and some supporting plugins, see 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/package.json"&gt;here&lt;/a&gt;.
After running the install, we can use gulp to compile our team and optimise the
output of pelican.&lt;/p&gt;
&lt;p&gt;Since we defined all our pre-pelican steps in one command, the step in our configuration
becomes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;prePelican&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pre-Pelican Compile&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the post pelican step becomes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;postPelican&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Post-Pelican Compile&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We put these commands before and after our pelican step:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="nf"&gt;task:&lt;/span&gt; &lt;span class="n"&gt;UsePythonVersion&lt;/span&gt;&lt;span class="mi"&gt;@0&lt;/span&gt;
  &lt;span class="nl"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;versionSpec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Use&lt;/span&gt; &lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt;
    &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="n"&gt;requirements&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Install&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="n"&gt;dependencies&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;task&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NodeTool&lt;/span&gt;&lt;span class="mi"&gt;@0&lt;/span&gt;
  &lt;span class="nl"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;versionSpec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="mf"&gt;10.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Install&lt;/span&gt; &lt;span class="n"&gt;Node&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;js&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;prePelican&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Pre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt; &lt;span class="n"&gt;Compile&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;pelican&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;publishconf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt; &lt;span class="n"&gt;Compile&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;gulp&lt;/span&gt; &lt;span class="n"&gt;postPelican&lt;/span&gt;
  &lt;span class="nl"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Post&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt; &lt;span class="n"&gt;Compile&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With that set up, we are basically all ready to execute our compilation process.
Next up, getting the data.&lt;/p&gt;
&lt;h2&gt;Checking out the additional repositories&lt;/h2&gt;
&lt;p&gt;In order to get our data from github, we basically need to clone our content and
theme repositories. Since I was having some troubles with the script task, I opted
to use the powershell task. This task basically gives access to a powershell instance
in your configuration, and allows you to run a variety of commands. &lt;/p&gt;
&lt;p&gt;Since git comes pre-installed, we do not have to worry about it, and can just use
git commands in our powershell task.&lt;/p&gt;
&lt;p&gt;There might be reasons why you want to keep your theme and content into private
repositories, in order to clone these repositories you will need to authenticate
yourself. Ideally, you would use some token based way to authenticate yourself,
however I have not come around to do so in my own pipeline, so instead we can alse  use 
basic authentication for this within github. In order to do so we need to specify 
our URL as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\\&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nl"&gt;account_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;account_pw&lt;/span&gt;&lt;span class="nv"&gt;@github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;repository&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;account&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;/&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;repository&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We do not want to leak this information in our build logs. Therefore we are going 
to use private variables, 
&lt;a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&amp;amp;tabs=yaml%2Cbatch"&gt;as microsoft recommends&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thus our clone steps then become:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;powershell&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;github.com/BeardedPlatypus/rubber-squid.git&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;:$env:GITHUB_PW@$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$env:GITHUB_ACCOUNT$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://$url&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;clone&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;theme/rubber-squid&amp;quot;&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Check out - Rubber Squid Theme&amp;#39;&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_ACCOUNT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_PW&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;powershell&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;github.com/BeardedPlatypus/personal-website-content.git&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;:$env:GITHUB_PW@$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$env:GITHUB_ACCOUNT$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://$url&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;clone&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Check out - Blog Content&amp;#39;&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_ACCOUNT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_PW&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first steps are done to build our URL as described above. I had 
some trouble getting this to work too be honest, and this ended up
working correctly, so I decided to stick with it.&lt;/p&gt;
&lt;p&gt;Once we have build our URL, we can clone our repositories. Because
pelican expects them in a specific place relative to our working 
directory, we add the folder we want them in.&lt;/p&gt;
&lt;p&gt;I have added these steps before I even install python or Node.js.
The chance that these steps fail as opposed to the install steps
is greater, and we rather fail earlier than later.&lt;/p&gt;
&lt;h2&gt;Getting some artifacts&lt;/h2&gt;
&lt;p&gt;Now that we have all our compilation steps set up, once we run
our build confiration, we should have a nice &lt;code&gt;website_dist&lt;/code&gt; folder,
containing our whole website. Before we push this to our github 
pages, let's add some steps to publish this as an artifact as well.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="nf"&gt;task:&lt;/span&gt; &lt;span class="n"&gt;CopyFiles&lt;/span&gt;&lt;span class="mi"&gt;@2&lt;/span&gt;
  &lt;span class="nl"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nl"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;website_dist&lt;/span&gt;&lt;span class="cm"&gt;/**&amp;#39;&lt;/span&gt;
&lt;span class="cm"&gt;    targetFolder: $(Build.ArtifactStagingDirectory)&lt;/span&gt;
&lt;span class="cm"&gt;  displayName: &amp;#39;Artifacts - Copy&amp;#39;&lt;/span&gt;

&lt;span class="cm"&gt;- task: PublishBuildArtifacts@1&lt;/span&gt;
&lt;span class="cm"&gt;  inputs:&lt;/span&gt;
&lt;span class="cm"&gt;    pathToPublish: $(Build.ArtifactStagingDirectory)&lt;/span&gt;
&lt;span class="cm"&gt;    artifactName: websiteContents&lt;/span&gt;
&lt;span class="cm"&gt;  displayName: &amp;#39;Artifacts - Publish&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will output our &lt;code&gt;website_dist&lt;/code&gt; for us to inspect, and ensure
the website was generated correctly. We could further extend this
to also publish the output of pelican, or the first gulp step 
for example. This could help with debugging.&lt;/p&gt;
&lt;h2&gt;Pushing the content to github pages&lt;/h2&gt;
&lt;p&gt;In order to push our content to our github pages repository, we
need to do the following things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Clear our repository&lt;/li&gt;
&lt;li&gt;Add the output of our postPelican step&lt;/li&gt;
&lt;li&gt;Commit the changes&lt;/li&gt;
&lt;li&gt;Push the content&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In order to clear out the content of our current github pages
repository, we can create an empty check out of our repo, in
the &lt;code&gt;website_dist&lt;/code&gt; folder. This can be achieved with the 
following step:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;powershell&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;clone&lt;/span&gt; &lt;span class="c1"&gt;--no-checkout &amp;quot;https://github.com/BeardedPlatypus/BeardedPlatypus.github.io&amp;quot; website_dist&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Check out - BeardedPlatypus.io&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;--no-checkout&lt;/code&gt; flag will ensure we do not check out any files.
If we were to commit this as is, it would clear our whole repository.
We want to put this step before our &lt;code&gt;postPelican&lt;/code&gt; step, such that the
folder is still empty (otherwise git will complain).&lt;/p&gt;
&lt;p&gt;Now, once we have passed the &lt;code&gt;postPelican&lt;/code&gt; step, we can actually 
add all the files generated, commit, and push them. The step to
do this looks as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;powershell&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$env:USER_EMAIL&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$env:USER_NAME&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="k"&gt;add&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;
    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="k"&gt;commit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Automated update: $(Build.BuildNumber)&amp;quot;&lt;/span&gt;

    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;github.com/BeardedPlatypus/BeardedPlatypus.github.io.git&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;:$env:GITHUB_PW@$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$env:GITHUB_ACCOUNT$url&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://$url&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;push&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Update BeardedPlatypus.io&amp;#39;&lt;/span&gt;
  &lt;span class="n"&gt;workingDirectory&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;website_dist&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_ACCOUNT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;GITHUB_PW&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;USER_NAME&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;USER_EMAIL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We will execute this step in the &lt;code&gt;website_dist&lt;/code&gt; folder, as such
the &lt;code&gt;workingDirectory&lt;/code&gt; property of this step is pointing to this
folder. This will make it possible to refer just to the content
of this folder, and use the &lt;code&gt;--no-checkout&lt;/code&gt; local repository we 
just cloned.&lt;/p&gt;
&lt;p&gt;We start by setting up our &lt;code&gt;user.email&lt;/code&gt; and &lt;code&gt;user.name&lt;/code&gt; in order to be 
able to push our content to the repository in the final step. 
Next, we add and commit all the changes currently existing in the 
folder. Because the empty folder should already have been staged due
to the &lt;code&gt;--no-checkout&lt;/code&gt; flag, this should leave us with the files as 
they are in &lt;code&gt;website_dist&lt;/code&gt;. Furthermore, if there are no changes, 
git will just say everything is up to date, and finish up everything. &lt;/p&gt;
&lt;p&gt;After this, we again build our url, and push to the master branch of
the github pages repository. And with that we have our automatic 
deployment of our static website. &lt;/p&gt;
&lt;p&gt;The full &lt;code&gt;azure-pipelines.yml&lt;/code&gt; can be found 
&lt;a href="https://github.com/BeardedPlatypus/personal-website-config/blob/master/azure-pipelines.yml"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Triggering the build on content and theme changes&lt;/h2&gt;
&lt;p&gt;Unfortunately, we currently only trigger the build automatically when
we make a change to the configuration repository. Ideally, this repository
would change little, and most of the changes would be either to
the content or the theme. Thus, whenever we make a change to either 
of these repositories, we would need to do a manual run, which really
is not that much better than doing it by hand on your local machine.&lt;/p&gt;
&lt;p&gt;We can do better! As far as I know, we cannot directly add triggers
that go off once we make changes to these repositories, as one build
only works with one base repository. However, we can make our current
build trigger upon the completion of other builds. Therefor, we will
add some really simple build pipelines for these two repositories:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;trigger&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;

&lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;vmImage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ubuntu-latest&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Theme has been triggered.&amp;quot;&lt;/span&gt;
  &lt;span class="n"&gt;displayName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Theme&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You could in theory extend these with some sanity or sanitary checks,
such that you do not kick off builds if you know something is wrong,
for now however I have set them up to merely do a simple echo and 
wrap up.&lt;/p&gt;
&lt;p&gt;Once we have set up these pipelines, you can add the completion of
these pipelines as triggers under the trigger settings of our
main build pipeline. Once that is done, our main build should 
trigger automatically. You can try it by running our newly added
pipeline once, and then check if our main gets triggered subsequently.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;In this article, we set up a simple Azure DevOps build to compile a static
website. We have gone over how to set up the python task to execute pelican,
and how to further optimise the results with the help of gulp. Finally, we
have set it up in such a way that changes to either the theme or content
repositories will ensure the website gets automatically updated and pushed
to the github pages repository.&lt;/p&gt;
&lt;p&gt;We could further extend this pipeline by adding additional optimisation. 
Furthermore, the build pipelines of both the theme and content could be
extended with additional checks, to ensure we only push when we can create
a valid website. For the time being though I am quite happy with the result.&lt;/p&gt;
&lt;p&gt;Thanks for reading, and I hope to see you soon again in another article!&lt;/p&gt;</content></entry></feed>